{"mappings":"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","sources":["src/logic/elements.ts","src/logic/util.ts","src/logic/state.ts","src/main.ts"],"sourcesContent":["export const getContent = () => document.getElementById('content');\n\nexport const getClockWrapper = () => document.getElementById('clock-wrapper')!;\nexport const getClock = () => document.getElementById('clock')!;\n\nexport const getStartStopButton = () =>\n  document.getElementById('start-stop-button')!;\n\nexport const getIncrementers = () => document.getElementById('incrementers')!;\nexport const getIncButtons = () =>\n  document.getElementsByClassName('inc-button');\n","export const minutesToMillis = (minutes: number) => minutes * 60000;\n\n// Modified from https://stackoverflow.com/a/19700358\nexport const msToTime = (ms: number) => {\n  // let centiseconds: string | number = Math.floor((ms % 1000) / 10);\n  let seconds: string | number = Math.floor((ms / 1000) % 60);\n  let minutes: string | number = Math.floor((ms / (1000 * 60)) % 60);\n  let hours: string | number = Math.floor((ms / (1000 * 60 * 60)) % 24);\n\n  hours = hours < 10 ? '0' + hours : hours;\n  minutes = minutes < 10 ? '0' + minutes : minutes;\n  seconds = seconds < 10 ? '0' + seconds : seconds;\n  // centiseconds = centiseconds < 10 ? '0' + centiseconds : centiseconds;\n\n  return hours + ':' + minutes + ':' + seconds;\n};\n\nexport const timeToMs = (timeString: string) => {\n  const [hrs, mins, secs] = timeString.split(':');\n\n  return (\n    parseInt(hrs, 10) * 60 * 60 * 1000 +\n    parseInt(mins, 10) * 60 * 1000 +\n    parseInt(secs, 10) * 1000\n  );\n};\n","import { minutesToMillis } from './util';\n\nlet start = Date.now();\nexport const getStart = () => start;\nexport const setStart = (newTime: number) => (start = newTime);\n\nlet clockLength = minutesToMillis(15);\nexport const getClockLength = () => clockLength;\nexport const setClockLength = (newLength: number) => (clockLength = newLength);\n\nlet timerRef = { isRunning: false };\nexport const getTimerRef = () => timerRef;\nexport const setTimerIsRunning = (isRunning: boolean) =>\n  (timerRef.isRunning = isRunning);\n","import {\n  getClock,\n  getClockWrapper,\n  getIncButtons,\n  getIncrementers,\n  getStartStopButton,\n} from '~/src/logic/elements';\nimport {\n  getStart,\n  getClockLength,\n  getTimerRef,\n  setTimerIsRunning,\n  setStart,\n} from './logic/state';\nimport { msToTime, timeToMs } from './logic/util';\n\n// ON CLICKS\nconst onTogglePlay = () => {\n  const startStop = getStartStopButton();\n  if (getTimerRef().isRunning) {\n    setTimerIsRunning(false);\n    startStop.textContent = '▶';\n    getIncrementers().style.display = 'flex';\n  } else {\n    setTimerIsRunning(true);\n    // Not super accurate but whatever\n    const timeRemaining = timeToMs(getClock().textContent!);\n    setStart(Date.now() - (getClockLength() - timeRemaining));\n    startStop.textContent = 'II';\n    getIncrementers().style.display = 'none';\n  }\n};\n\ntype TimeUnit = 'hr' | 'min' | 'sec';\nconst createOnIncOrDec = (unit: TimeUnit, operation: '+' | '-') => () => {\n  const clock = getClock();\n  const [hr, min, sec] = clock.textContent!.split(':');\n  const timeObj: Record<TimeUnit, number> = {\n    hr: parseInt(hr, 10),\n    min: parseInt(min, 10),\n    sec: parseInt(sec, 10),\n  };\n\n  const nextVal = operation === '+' ? timeObj[unit] + 1 : timeObj[unit] - 1;\n  timeObj[unit] = nextVal > 59 ? 0 : nextVal < 0 ? 59 : nextVal;\n\n  clock.textContent = Object.keys(timeObj)\n    .map(\n      (unit) =>\n        `${timeObj[unit as TimeUnit] < 10 ? '0' : ''}${\n          timeObj[unit as TimeUnit]\n        }`\n    )\n    .join(':');\n};\n\n// SETUP INITIAL STATE\ngetClock().textContent = msToTime(getClockLength());\nconst startStop = getStartStopButton();\nstartStop.textContent = getTimerRef().isRunning ? 'II' : '▶';\nstartStop.addEventListener('click', onTogglePlay);\nArray.from(getIncButtons()).forEach((b, i) =>\n  b.addEventListener(\n    'click',\n    createOnIncOrDec(\n      i < 2 ? 'hr' : i < 4 ? 'min' : 'sec',\n      i % 2 === 0 ? '+' : '-'\n    )\n  )\n);\n\n// SETUP CLOCK INTERVAL\nsetInterval(() => {\n  if (getTimerRef().isRunning) {\n    const start = getStart();\n    const now = Date.now();\n    const totalTime = getClockLength();\n\n    const timeRemaining = totalTime - (now - start);\n\n    if (timeRemaining <= 0) {\n      setTimerIsRunning(false);\n      document.body.style.backgroundColor = '#000';\n      const startStop = getStartStopButton();\n      startStop.style.boxShadow = 'none';\n      startStop.style.cursor = 'default';\n      startStop.removeEventListener('click', onTogglePlay);\n    } else {\n      const percRemaining = (timeRemaining / totalTime) * 100;\n\n      getClock().textContent = msToTime(timeRemaining);\n      // Color approaches red from black as time decreases\n      const colorString = `hsl(7, ${Math.round(\n        100 - percRemaining\n      )}%, ${Math.round((100 - percRemaining) / 2)}%)`;\n      getClock().style.color = colorString;\n      getClockWrapper().style.borderColor = `rgba(0, 0, 0, ${\n        percRemaining / 100\n      })`;\n    }\n  }\n}, 333);\n"],"names":["$9941a5d7cd76d762$export$79a05fcfde346dc","document","getElementById","$9941a5d7cd76d762$export$830379f8540c56e4","$9941a5d7cd76d762$export$96f82c0b651f68ab","$d24eb21b7a7f6b6e$export$967b849b2dd25d36","ms","seconds","Math","floor","minutes","hours","$8daa148e88a0db6b$var$start","Date","now","$8daa148e88a0db6b$var$clockLength","$8daa148e88a0db6b$export$e2a10ee4eaff10d5","$8daa148e88a0db6b$var$timerRef","isRunning","$8daa148e88a0db6b$export$fafa165094d5b8b1","$8daa148e88a0db6b$export$7125d057638d28a2","$04177131cda29cd1$var$onTogglePlay","startStop","textContent","style","display","timeRemaining","timeString","hrs","mins","secs","split","parseInt","$d24eb21b7a7f6b6e$export$529da4678ffae14","newTime","$04177131cda29cd1$var$startStop","addEventListener","Array","from","getElementsByClassName","forEach","b","i","unit","operation","clock","hr","min","sec","timeObj","nextVal","Object","keys","map","join","setInterval","start","totalTime","body","backgroundColor","boxShadow","cursor","removeEventListener","percRemaining","colorString","round","color","borderColor"],"version":3,"file":"index.94f6adbd.js.map"}